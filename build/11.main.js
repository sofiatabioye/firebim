(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1098:function(e,t,r){"use strict";t.a=r.p+"thumbnail.png"},1349:function(e,t,r){"use strict";r.r(t);var n=r(917),M=r.n(n),n=r(44),T=r.n(n),n=r(126),A=r.n(n),n=r(918),G=r.n(n),V=r(1),B=r.n(V),R=r(238),z=r(244),K=r(910),q=r(1098),J=r(929),n=r(916),a=r.n(n),n=r(922),o=r(5),c=n.a.BASE_API_URL;function Y(e,r){return function(t){return t({type:o.Kb}),a.a.post(c+"/model/upload-components/"+e,r,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){t((e=e.data.message,{type:o.Mb,message:e})),z.b.success("Asset data uploaded successfully")}).catch(function(e){e.response.data.errors,e=e.response.data.message;t({type:o.Lb,error:e}),z.b.error("Error uploading assets data")})}}function Q(e,n){return function(r){return r({type:o.z}),z.b.success("Download started! Please wait..."),a.a.get(c+"/model/download-components/"+e).then(function(e){z.b.success("Downloading file..");var t=document.createElement("a");t.target="_blank",t.download=n+".csv",t.href="data:text/csv;charset=utf-8,"+encodeURI(e.data),t.click(),z.b.success("Download successful"),r({type:o.B,message:"Download successful"})}).catch(function(e){e.response.data.errors,e=e.response.data.message;r({type:o.A,error:e}),z.b.error("download failed")})}}var H=r(912),W=r(911);function l(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function X(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach(function(e){T()(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}t.default=function(t){var e=t.match.params.modelId,r=Object(R.c)(function(e){return e.project.projects}),n=Object(R.c)(function(e){return e.user.users}),a=Object(R.c)(function(e){return e.auth.user}),o=Object(V.useState)(!1),c=A()(o,2),l=c[0],i=c[1],s=Object(V.useState)(!1),u=A()(s,2),m=u[0],f=u[1],p=Object(V.useState)(!1),d=A()(p,2),h=d[0],v=d[1],y=Object(V.useState)(!1),g=A()(y,2),b=g[0],E=g[1],w=Object(V.useState)(void 0),x=A()(w,2),j=x[0],O=x[1],o=Object(V.useState)(0),c=A()(o,2),N=c[0],k=c[1],s=Object(V.useState)(!1),u=A()(s,2),L=u[0],C=u[1],p=Object(V.useState)(!1),d=A()(p,2),y=d[0],S=d[1],g=Object(V.useState)({}),w=A()(g,2),P=w[0],D=w[1],_=Object(R.b)(),x=Object(V.useState)({isValid:!1,values:{},touched:{},errors:{}}),o=A()(x,2),I=o[0],F=o[1];Object(V.useEffect)(function(){var e=0<r.length?r.find(function(e){return e.id===Number(t.match.params.projectId)}):{};D(e)},[t.match.params.projectId,r]);var c=function(r){r.persist(),F(function(e){var t;return X(X({},e),{},{values:X(X({},e.values),{},(t={},T()(t,r.target.name,"checkbox"===r.target.type?r.target.checked:r.target.value),T()(t,r.target.name,"file"===r.target.type?O(r.target.files[0]):r.target.value),t)),touched:X(X({},e.touched),{},T()({},r.target.name,!0))})})},U=function(){var r=M()(G.a.mark(function e(t,r){return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:_(Object(J.c)(t,r));case 1:case"end":return e.stop()}},e)}));return function(e,t){return r.apply(this,arguments)}}(),s=function(){var e=M()(G.a.mark(function e(){return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:_(Q(P.model.id,P.title));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),u=function(){i(!l)},p=function(){v(!h)},d=function(){f(!0)},g=function(){var t=M()(G.a.mark(function e(t){var r;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=n&&0<n.length?n.find(function(e){return e.email===I.values.email}):null,I.isValid)return e.next=5,_(Object(H.g)(X(X({},I.values),{projectId:P.id,name:r.name,role:r.role}))).then(M()(G.a.mark(function e(){return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return F({isValid:!1,values:{},touched:{},errors:{}}),v(!1),e.next=4,_(Object(J.e)());case 4:return e.next=6,C(!0);case 6:case"end":return e.stop()}},e)})));e.next=5;break;case 5:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=M()(G.a.mark(function e(t){return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),_(Object(H.i)({projectId:P.id,userId:N})).then(M()(G.a.mark(function e(){return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(!1);case 2:return e.next=4,C(!0);case 4:k(0),_(Object(J.e)());case 6:case"end":return e.stop()}},e)})));case 2:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=M()(G.a.mark(function e(t){var r;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(r=new FormData).append("sourceData",j),r.append("title",I.values.title),e.prev=4,S(!0),e.next=8,_(Object(J.f)(P.model.id,r)).then(function(e){S(!1),i(!1),F({isValid:!1,values:{},touched:{},errors:{}}),O(void 0),C(!0)});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),z.b.error("error uploading model");case 13:case"end":return e.stop()}},e,null,[[4,10]])}));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=M()(G.a.mark(function e(t){var r;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(r=new FormData).append("file",j),e.prev=3,S(!0),e.next=7,_(Y(P.model.id,r)).then(function(){S(!1),f(!1),F({isValid:!1,values:{},touched:{},errors:{}}),O(void 0),C(!0)});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),z.b.error("error uploading asset data");case 12:case"end":return e.stop()}},e,null,[[3,9]])}));return function(e){return t.apply(this,arguments)}}();return Object(V.useEffect)(function(){"admin"!==a.role&&_(Object(J.d)(t.match.params.projectId))},[t.match.params.projectId,a,_]),Object(V.useEffect)(function(){F(function(e){return X(X({},e),{},{isValid:!0,errors:{}})}),L&&_(Object(J.e)())},[L,t.match.params.projectId,_]),B.a.createElement(B.a.Fragment,null,B.a.createElement(K.T,null,B.a.createElement(K.j,{xs:"12",xl:"12",className:"my-4 border-bottom mb-4"},B.a.createElement("h1",{className:"text-uppercase font-2xl py-2"},P?P.title:"Model"),B.a.createElement("h2",{className:"py-2 font-xl"},B.a.createElement("b",null,"Description:")," ",P?P.description:null),B.a.createElement("h2",{className:"py-2 font-xl"},B.a.createElement("b",null,"Location:")," ",P?P.address:null," "),B.a.createElement("span",{className:"float-right"},P?B.a.createElement(K.f,null,a&&"admin"===a.role?B.a.createElement(K.e,{color:"warning",className:"text-white",onClick:s},B.a.createElement("i",{className:"fa fa-download"})," Download Asset Data"):null,a&&"admin"===a.role?B.a.createElement(K.e,{color:"info",className:"text-white",onClick:d},B.a.createElement("i",{className:"fa fa-upload"})," Upload Assets Data"):null,B.a.createElement(K.J,{to:"/project/model/"+e+"/assets"}," ",B.a.createElement(K.e,{color:"primary",className:"sidebar-dark text-white"},B.a.createElement("i",{className:"fa fa-eye"})," View Assets Data"))):null))),P&&P.model?B.a.createElement(K.T,null,B.a.createElement(K.j,{xs:"12",xl:"6",className:"align-content-end m-auto"},B.a.createElement(K.g,{className:"card-accent-dark shadow-lg",size:"lg"},B.a.createElement(K.i,{className:"text-center"},B.a.createElement("div",{className:"d-block my-3"},P.model.title," (",P.model.fileName,")"),a&&"admin"===a.role&&P?B.a.createElement(K.f,null,B.a.createElement(K.e,{color:"info",onClick:u},"Update Model"),B.a.createElement(K.e,{color:"light",onClick:function(){return U(P.model.id,P.model.fileName)}},"Download Model")):null),B.a.createElement(K.h,{className:"text-center"},B.a.createElement(K.J,{to:"/model/"+P.model.fileName+"/"+e+"/viewer"},B.a.createElement(K.B,{src:q.a,align:"center",fluid:!0,className:"mx-auto my-auto w-100"}))))),B.a.createElement(K.j,{xs:"12",xl:"6",className:"mt-0"},B.a.createElement(K.hb,{activeTab:"home",className:"align-items-center "},B.a.createElement(K.P,{variant:"tabs"},B.a.createElement(K.Q,null,B.a.createElement(K.R,{"data-tab":"home"},"Users"))),B.a.createElement(K.fb,null,B.a.createElement(K.gb,{"data-tab":"home"},B.a.createElement(K.g,{className:"shadow-none",size:"lg"},B.a.createElement(K.h,{className:"text-left"},a&&"admin"===a.role&&P?B.a.createElement(K.e,{className:"float-right button2",variant:"outline",onClick:p},"Invite User"):null,B.a.createElement("div",{className:"userSections py-4"},B.a.createElement(K.m,{items:P&&P.user?P.user:[],fields:a&&"admin"===a.role?["name","email","role","action"]:["name","email","role"],itemsPerPage:10,pagination:!0,tableFilter:!0,sorter:!0,hover:!0,scopedSlots:{action:function(t){return B.a.createElement("td",{className:"px-4"},B.a.createElement(K.e,{className:"pl-6",color:"warning",variant:"ghost",onClick:function(){return e=t.id,k(e),void E(!b);var e}},B.a.createElement(W.a,{name:"cil-trash",customClasses:"c-sidebar-nav-icon"})))}}}))))))))):B.a.createElement(K.db,null),B.a.createElement(K.K,{show:l,onClose:u},B.a.createElement(K.N,{closeButton:!0}," Upload Model"),B.a.createElement(K.t,{onSubmit:x},B.a.createElement(K.L,null,B.a.createElement(K.u,null,B.a.createElement(K.C,{type:"text",id:"title",name:"title",placeholder:"Enter Model Name",onChange:c,value:I.values.title||"",required:!0})),B.a.createElement(K.u,null,B.a.createElement("input",{type:"file",name:"model",id:"model",accept:".ifc",onChange:c,required:!0})),y?B.a.createElement("div",{className:"float-left"},B.a.createElement(K.db,{size:"sm"})," Uploading..."):null),B.a.createElement(K.M,null,B.a.createElement(K.e,{className:"text-white bg-info",type:"submit"},"Submit")," ",B.a.createElement(K.e,{color:"secondary",onClick:function(){return i(!1)}},"Cancel")))),B.a.createElement(K.K,{show:h,onClose:p},B.a.createElement(K.N,{closeButton:!0},"Invite User (",P?P.title:null,")"),B.a.createElement(K.t,{onSubmit:g},B.a.createElement(K.L,null,B.a.createElement(K.u,null,B.a.createElement(K.U,{custom:!0,name:"email",id:"email",autoComplete:"email",onChange:c,value:I.values.email||"",required:!0},B.a.createElement("option",{value:""},"Please select"),n&&0<n.length?n.map(function(e){return"admin"!==e.role?B.a.createElement("option",{value:e.email,key:e.id},e.email," (",e.role,")"):null}):""))),B.a.createElement(K.M,null,B.a.createElement(K.e,{className:"text-white bg-info",type:"submit"},"Submit")," ",B.a.createElement(K.e,{color:"secondary",onClick:function(){return v(!1)}},"Cancel")))),B.a.createElement(K.K,{show:m,onClose:d},B.a.createElement(K.N,{closeButton:!0}," Upload CSV File"),B.a.createElement(K.t,{onSubmit:o},B.a.createElement(K.L,null,B.a.createElement(K.u,null,B.a.createElement("input",{type:"file",name:"csvFile",id:"csvFile",accept:".csv",onChange:c,required:!0})),y?B.a.createElement("div",{className:"float-left"},B.a.createElement(K.db,{size:"sm"})," Uploading..."):null),B.a.createElement(K.M,null,B.a.createElement(K.e,{className:"text-white bg-info",type:"submit"},"Submit")," ",B.a.createElement(K.e,{color:"secondary",onClick:function(){return f(!1)}},"Cancel")))),B.a.createElement(K.K,{show:b,onClose:E},B.a.createElement(K.N,{closeButton:!0}," Confirm"),B.a.createElement(K.L,null,"Are you sure you want to remove this user from this project? "),B.a.createElement(K.M,null,B.a.createElement(K.e,{className:"text-white bg-danger",type:"submit",onClick:w},"Yes")," ",B.a.createElement(K.e,{color:"secondary",onClick:function(){return E(!1)}},"Cancel"))))}},917:function(e,t){function i(e,t,r,n,a,o,c){try{var l=e[o](c),i=l.value}catch(e){return void r(e)}l.done?t(i):Promise.resolve(i).then(n,a)}e.exports=function(l){return function(){var e=this,c=arguments;return new Promise(function(t,r){var n=l.apply(e,c);function a(e){i(n,t,r,a,o,"next",e)}function o(e){i(n,t,r,a,o,"throw",e)}a(void 0)})}},e.exports.default=e.exports,e.exports.__esModule=!0},918:function(e,t,r){e.exports=r(920)},920:function(t,e,r){t=function(c){"use strict";var i,e=Object.prototype,s=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",a=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a,o,c,l,t=t&&t.prototype instanceof v?t:v,t=Object.create(t.prototype),n=new N(n||[]);return t._invoke=(a=e,o=r,c=n,l=m,function(e,t){if(l===p)throw new Error("Generator is already running");if(l===d){if("throw"===e)throw t;return L()}for(c.method=e,c.arg=t;;){var r=c.delegate;if(r){var n=function e(t,r){var n=t.iterator[r.method];if(n===i){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=i,e(t,r),"throw"===r.method))return h;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=u(n,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,h;n=n.arg;if(!n)return r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h;{if(!n.done)return n;r[t.resultName]=n.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=i)}r.delegate=null;return h}(r,c);if(n){if(n===h)continue;return n}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(l===m)throw l=d,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);l=p;n=u(a,o,c);if("normal"===n.type){if(l=c.done?d:f,n.arg!==h)return{value:n.arg,done:c.done}}else"throw"===n.type&&(l=d,c.method="throw",c.arg=n.arg)}}),t}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}c.wrap=l;var m="suspendedStart",f="suspendedYield",p="executing",d="completed",h={};function v(){}function y(){}function g(){}var b={};o(b,n,function(){return this});t=Object.getPrototypeOf,t=t&&t(t(k([])));t&&t!==e&&s.call(t,n)&&(b=t);var E=g.prototype=v.prototype=Object.create(b);function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function x(c,l){var t;this._invoke=function(r,n){function e(){return new l(function(e,t){!function t(e,r,n,a){e=u(c[e],c,r);if("throw"!==e.type){var o=e.arg;return(r=o.value)&&"object"==typeof r&&s.call(r,"__await")?l.resolve(r.__await).then(function(e){t("next",e,n,a)},function(e){t("throw",e,n,a)}):l.resolve(r).then(function(e){o.value=e,n(o)},function(e){return t("throw",e,n,a)})}a(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(t){if(t){var e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,e=function e(){for(;++r<t.length;)if(s.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=i,e.done=!0,e};return e.next=e}}return{next:L}}function L(){return{value:i,done:!0}}return o(E,"constructor",y.prototype=g),o(g,"constructor",y),y.displayName=o(g,a,"GeneratorFunction"),c.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,o(e,a,"GeneratorFunction")),e.prototype=Object.create(E),e},c.awrap=function(e){return{__await:e}},w(x.prototype),o(x.prototype,r,function(){return this}),c.AsyncIterator=x,c.async=function(e,t,r,n,a){void 0===a&&(a=Promise);var o=new x(l(e,t,r,n),a);return c.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(E),o(E,a,"Generator"),o(E,n,function(){return this}),o(E,"toString",function(){return"[object Generator]"}),c.keys=function(r){var e,n=[];for(e in r)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},c.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=i)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=i),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var a=this.tryEntries[t],o=a.completion;if("root"===a.tryLoc)return e("end");if(a.tryLoc<=this.prev){var c=s.call(a,"catchLoc"),l=s.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return e(a.catchLoc,!0);if(this.prev<a.finallyLoc)return e(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return e(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return e(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}var o=(a=a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc?null:a)?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n,a=r.completion;return"throw"===a.type&&(n=a.arg,O(r)),n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=i),h}},c}(t.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}}]);