(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1202:function(e,t,n){var r={"./af":938,"./af.js":938,"./ar":939,"./ar-dz":940,"./ar-dz.js":940,"./ar-kw":941,"./ar-kw.js":941,"./ar-ly":942,"./ar-ly.js":942,"./ar-ma":943,"./ar-ma.js":943,"./ar-sa":944,"./ar-sa.js":944,"./ar-tn":945,"./ar-tn.js":945,"./ar.js":939,"./az":946,"./az.js":946,"./be":947,"./be.js":947,"./bg":948,"./bg.js":948,"./bm":949,"./bm.js":949,"./bn":950,"./bn-bd":951,"./bn-bd.js":951,"./bn.js":950,"./bo":952,"./bo.js":952,"./br":953,"./br.js":953,"./bs":954,"./bs.js":954,"./ca":955,"./ca.js":955,"./cs":956,"./cs.js":956,"./cv":957,"./cv.js":957,"./cy":958,"./cy.js":958,"./da":959,"./da.js":959,"./de":960,"./de-at":961,"./de-at.js":961,"./de-ch":962,"./de-ch.js":962,"./de.js":960,"./dv":963,"./dv.js":963,"./el":964,"./el.js":964,"./en-au":965,"./en-au.js":965,"./en-ca":966,"./en-ca.js":966,"./en-gb":967,"./en-gb.js":967,"./en-ie":968,"./en-ie.js":968,"./en-il":969,"./en-il.js":969,"./en-in":970,"./en-in.js":970,"./en-nz":971,"./en-nz.js":971,"./en-sg":972,"./en-sg.js":972,"./eo":973,"./eo.js":973,"./es":974,"./es-do":975,"./es-do.js":975,"./es-mx":976,"./es-mx.js":976,"./es-us":977,"./es-us.js":977,"./es.js":974,"./et":978,"./et.js":978,"./eu":979,"./eu.js":979,"./fa":980,"./fa.js":980,"./fi":981,"./fi.js":981,"./fil":982,"./fil.js":982,"./fo":983,"./fo.js":983,"./fr":984,"./fr-ca":985,"./fr-ca.js":985,"./fr-ch":986,"./fr-ch.js":986,"./fr.js":984,"./fy":987,"./fy.js":987,"./ga":988,"./ga.js":988,"./gd":989,"./gd.js":989,"./gl":990,"./gl.js":990,"./gom-deva":991,"./gom-deva.js":991,"./gom-latn":992,"./gom-latn.js":992,"./gu":993,"./gu.js":993,"./he":994,"./he.js":994,"./hi":995,"./hi.js":995,"./hr":996,"./hr.js":996,"./hu":997,"./hu.js":997,"./hy-am":998,"./hy-am.js":998,"./id":999,"./id.js":999,"./is":1e3,"./is.js":1e3,"./it":1001,"./it-ch":1002,"./it-ch.js":1002,"./it.js":1001,"./ja":1003,"./ja.js":1003,"./jv":1004,"./jv.js":1004,"./ka":1005,"./ka.js":1005,"./kk":1006,"./kk.js":1006,"./km":1007,"./km.js":1007,"./kn":1008,"./kn.js":1008,"./ko":1009,"./ko.js":1009,"./ku":1010,"./ku.js":1010,"./ky":1011,"./ky.js":1011,"./lb":1012,"./lb.js":1012,"./lo":1013,"./lo.js":1013,"./lt":1014,"./lt.js":1014,"./lv":1015,"./lv.js":1015,"./me":1016,"./me.js":1016,"./mi":1017,"./mi.js":1017,"./mk":1018,"./mk.js":1018,"./ml":1019,"./ml.js":1019,"./mn":1020,"./mn.js":1020,"./mr":1021,"./mr.js":1021,"./ms":1022,"./ms-my":1023,"./ms-my.js":1023,"./ms.js":1022,"./mt":1024,"./mt.js":1024,"./my":1025,"./my.js":1025,"./nb":1026,"./nb.js":1026,"./ne":1027,"./ne.js":1027,"./nl":1028,"./nl-be":1029,"./nl-be.js":1029,"./nl.js":1028,"./nn":1030,"./nn.js":1030,"./oc-lnc":1031,"./oc-lnc.js":1031,"./pa-in":1032,"./pa-in.js":1032,"./pl":1033,"./pl.js":1033,"./pt":1034,"./pt-br":1035,"./pt-br.js":1035,"./pt.js":1034,"./ro":1036,"./ro.js":1036,"./ru":1037,"./ru.js":1037,"./sd":1038,"./sd.js":1038,"./se":1039,"./se.js":1039,"./si":1040,"./si.js":1040,"./sk":1041,"./sk.js":1041,"./sl":1042,"./sl.js":1042,"./sq":1043,"./sq.js":1043,"./sr":1044,"./sr-cyrl":1045,"./sr-cyrl.js":1045,"./sr.js":1044,"./ss":1046,"./ss.js":1046,"./sv":1047,"./sv.js":1047,"./sw":1048,"./sw.js":1048,"./ta":1049,"./ta.js":1049,"./te":1050,"./te.js":1050,"./tet":1051,"./tet.js":1051,"./tg":1052,"./tg.js":1052,"./th":1053,"./th.js":1053,"./tk":1054,"./tk.js":1054,"./tl-ph":1055,"./tl-ph.js":1055,"./tlh":1056,"./tlh.js":1056,"./tr":1057,"./tr.js":1057,"./tzl":1058,"./tzl.js":1058,"./tzm":1059,"./tzm-latn":1060,"./tzm-latn.js":1060,"./tzm.js":1059,"./ug-cn":1061,"./ug-cn.js":1061,"./uk":1062,"./uk.js":1062,"./ur":1063,"./ur.js":1063,"./uz":1064,"./uz-latn":1065,"./uz-latn.js":1065,"./uz.js":1064,"./vi":1066,"./vi.js":1066,"./x-pseudo":1067,"./x-pseudo.js":1067,"./yo":1068,"./yo.js":1068,"./zh-cn":1069,"./zh-cn.js":1069,"./zh-hk":1070,"./zh-hk.js":1070,"./zh-mo":1071,"./zh-mo.js":1071,"./zh-tw":1072,"./zh-tw.js":1072};function a(e){e=o(e);return n(e)}function o(e){if(n.o(r,e))return r[e];e=new Error("Cannot find module '"+e+"'");throw e.code="MODULE_NOT_FOUND",e}a.keys=function(){return Object.keys(r)},a.resolve=o,(e.exports=a).id=1202},1321:function(e,n,r){"use strict";!function(m){var e=r(310),e=(r(311),r(312)),e=(r(226),r(1322)),t=r.n(e),e=(r(910),r(1323));window.$=t.a;var g,o=window.Autodesk,i={accessToken:e.a.getaccesstoken()};function s(e,i){var s=[];o.Viewing.Document.load(e,function(e){var t=o.Viewing.Document.getSubItemsWithProperties(e.getRootItem(),{type:"geometry"},!0);0<t.length&&g.load(e.getViewablePath(t[0])),g.loadExtension("FIREBIMExtension"),g.addEventListener(o.Viewing.OBJECT_TREE_CREATED_EVENT,function(){var n,r,a,o;n=function(e){g.model.getBulkProperties(e,["Category","Fire Rating"],function(e){for(var t,n,r=0;r<e.length;r++){var a=g.model.getInstanceTree().getNodeName(e[r].dbId);s.push({id:r+1,component:a,category:void 0!==e[r].properties[0]?e[r].properties[0].displayValue.replace("Revit","").replace(/\s/g,""):"",rating:void 0!==e[r].properties[1]?e[r].properties[1].displayValue:""}),i(s)}t=s,function(e,t,n,r,a){var o=e.createTHead().insertRow();o.className="ecHead";var i=document.createElement("th"),s=document.createElement("th"),l=document.createElement("th"),c=document.createElement("th"),e=document.createTextNode(t),t=document.createTextNode(n),n=document.createTextNode(r),r=document.createTextNode(a);i.appendChild(e),s.appendChild(t),l.appendChild(n),c.appendChild(r),o.appendChild(i),o.appendChild(s),o.appendChild(l),void 0!==a&&o.appendChild(c)}(n=document.createElement("table"),"id","Category","Component","Fire Rating"),function(e,t){for(var n=0;n<t.length;n++){m.log(t[n]);var r=document.createElement("tr");r.className="ecRow";var a=document.createElement("td"),o=document.createElement("td"),i=document.createElement("td"),s=document.createElement("td"),l=document.createTextNode(t[n].id),c=document.createTextNode(t[n].category),d=document.createTextNode(t[n].component),u=document.createTextNode(t[n].rating);a.appendChild(l),a.id=t[n].id,o.appendChild(c),i.appendChild(d),s.appendChild(u),r.appendChild(a),r.appendChild(o),r.appendChild(i),r.appendChild(s);t[n].component.split("[")[1];r.onclick=function(){g.select([378747])},e.appendChild(r)}}(n.createTBody(),t),document.getElementById("table").appendChild(n)})},a=0,o=[],g.getObjectTree(function(e){(function t(e){a++,0!=r.getChildCount(e)?r.enumNodeChildren(e,function(e){t(e)},!1):o.push(e),0==--a&&n(o)})((r=e).getRootId())})})},function(e){m.log(e)})}function l(e,t){m.log("FIREBIM extension"),o.Viewing.Extension.call(this,e,t)}l.prototype.load=function(){return g.toolbar?(this.createUI(),this.onSelectionBinded=this.onSelectionEvent.bind(this),g.addEventListener(o.Viewing.SELECTION_CHANGED_EVENT,this.onSelectionBinded)):(this.onToolbarCreatedBinded=this.onToolbarCreated.bind(this),g.addEventListener(o.Viewing.TOOLBAR_CREATED_EVENT,this.onToolbarCreatedBinded)),!0},l.prototype.onToolbarCreated=function(){this.viewer.removeEventListener(o.Viewing.TOOLBAR_CREATED_EVENT,this.onToolbarCreatedBinded),this.onToolbarCreatedBinded=null,this.createUI()},l.prototype.onSelectionEvent=function(e){var t=g.getSelection();this.viewer.fitToView(!0),this.viewer.getProperties(t[0],function(e){e&&m.log(e.properties)})},l.prototype.unload=function(){return alert("FIREBIMExtension is now unloaded!"),!0},l.prototype.createUI=function(){o.Viewing.UI.PropertyPanel};e={launchViewer:function(n,r,a){i.accessToken.then(function(e){var t={document:"urn:"+r,env:"AutodeskProduction",accessToken:e.access_token,refreshToken:i},e=document.getElementById(n);g=new o.Viewing.Private.GuiViewer3D(e,{}),o.Viewing.theExtensionManager.registerExtension("FIREBIMExtension",l),o.Viewing.Initializer(t,function(){g.initialize(),g.prefs.tag("ignore-producer"),s(t.document,a)})})},loadDocument:s};n.a=e}.call(this,r(43))},1323:function(e,r,a){"use strict";!function(t){var e=a(916),n=a.n(e);r.a={getaccesstoken:function(){return n.a.get("https://firebimapi.herokuapp.com/api/forge/token").then(function(e){return e.data.data.token}).catch(function(e){t.log(e)})}}}.call(this,a(43))},1324:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(1099);t.a=function(e){var t=e.title,n=e.categories,e=e.data;return a.a.createElement(o.Bar,{options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:t}}},data:{labels:n,datasets:[{label:"Elements Distribution",data:e,backgroundColor:"rgba(255, 99, 132, 0.5)"}]}})}},1335:function(e,t,n){"use strict";n.r(t),function(y){var e=n(917),w=n.n(e),e=n(126),k=n.n(e),e=n(918),T=n.n(e),x=n(1),V=n.n(x),N=n(238),e=n(1318),I=n.n(e),R=n(1321),e=n(916),B=n.n(e),O=n(1099),_=n(1324),e=n(1325),z=n.n(e),D=n(910),A=window.Autodesk,S=["Class A1","Class A2","Class B","Class C","Class D","Class E","Class F"];t.default=function(t){var e=Object(x.useState)(null),n=k()(e,2),r=n[0],a=n[1],o=Object(x.useState)(t.match.params.urn),i=k()(o,2),s=i[0],l=i[1],e=Object(x.useState)({}),n=k()(e,2),c=n[0],d=n[1],o=Object(x.useState)(null),i=k()(o,2),u=i[0],m=i[1],e=Object(x.useState)([]),n=k()(e,2),g=n[0],p=n[1],o=Object(x.useState)([]),i=k()(o,2),h=i[0],f=i[1],e=Object(x.useState)([]),n=k()(e,2),o=n[0],j=n[1],i=Object(x.useState)(1),e=k()(i,2),n=e[0],E=e[1],i=Object(N.b)(),e={labels:h,datasets:[{label:"# of Votes",data:o,backgroundColor:["rgba(223, 80, 112)","rgba(54, 142, 205)","rgba(255, 206, 86)","rgba(75, 192, 192)","rgba(153, 102, 255)","rgba(255, 159, 64)","rgba(45, 220, 56)","rgba(54, 162, 235)","rgba(165, 100, 56)","rgba(65, 190, 30)","rgba(255, 99, 132)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]};Object(x.useEffect)(function(){function e(){return(e=w()(T.a.mark(function e(){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.a.get("https://firebimapi.herokuapp.com/api/forge/token").then(function(e){d(e.data.data.token)}).catch(function(e){return e}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),l(t.match.params.urn)},[i,t]),Object(x.useEffect)(function(){R.a.launchViewer("viewerDiv",s,p)},[s]);function b(e,t){y.log("FIREBIM extension"),A.Viewing.Extension.call(this,e,t)}function v(e,n){var r,a=0,o=[];e.getObjectTree(function(e){(function t(e){a++,0!=r.getChildCount(e)?r.enumNodeChildren(e,function(e){t(e)},!1):o.push(e),0==--a&&n(o)})((r=e).getRootId())})}b.prototype.load=function(){return u.toolbar?(this.createUI(),this.onSelectionBinded=this.onSelectionEvent.bind(this),u.addEventListener(A.Viewing.SELECTION_CHANGED_EVENT,this.onSelectionBinded)):(this.onToolbarCreatedBinded=this.onToolbarCreated.bind(this),u.addEventListener(A.Viewing.TOOLBAR_CREATED_EVENT,this.onToolbarCreatedBinded)),!0};function C(e){u.select(e.dbId),(e=u.getPropertyPanel()).setCategoryCollapsed({name:"IFC Parameters",type:"category"}),e.setCategoryCollapsed({name:"Text",type:"category"},!1)}return V.a.createElement(V.a.Fragment,null,V.a.createElement(D.T,{style:{height:"85vh",marginTop:"-30px"}},V.a.createElement(D.j,{xs:"7",xl:"7"},V.a.createElement(I.a,{version:"7.0",urn:s,view:r,headless:!(b.prototype.onToolbarCreated=function(){this.viewer.removeEventListener(A.Viewing.TOOLBAR_CREATED_EVENT,this.onToolbarCreatedBinded),this.onToolbarCreatedBinded=null,this.createUI()}),onViewerError:function(e){y.log("Error loading viewer.")},onTokenRequest:function(){var t=w()(T.a.mark(function e(t){var n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t)return e.next=3,{access_token:c.access_token,expires_in:c.expires_in,token_type:"Bearer"};e.next=5;break;case 3:(n=e.sent)&&t(n.access_token,n.expires_in);case 5:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),onDocumentLoad:function(e,t){0===t.length?y.error("Document contains no viewables."):(A.Viewing.theExtensionManager.registerExtension("FIREBIMExtension",b),a(t[0]))},onDocumentError:function(e,t){y.log("Error loading a document",e)},onModelLoad:function(i,e){m(i),i.loadExtension(b);var s=[];i.addEventListener(A.Viewing.SELECTION_CHANGED_EVENT,function(e){i.getPropertyPanel(!0).setVisible(!0)}),i.addEventListener(A.Viewing.TOOLBAR_CREATED_EVENT,function(e){var t=new A.Viewing.UI.Button("report-button");t.addClass("report"),t.setToolTip("Generate Report"),t.onClick=function(e){return!1};var n=new A.Viewing.UI.ControlGroup("firebim-toolbar");n.addControl(t),i.toolbar.addControl(n)}),v(i,function(e){i.model.getBulkProperties(e,["Category","Fire Rating"],function(e){for(var t=0;t<e.length;t++){var n=Math.floor(Math.random()*S.length),r=i.model.getInstanceTree().getNodeName(e[t].dbId),a=void 0!==e[t].properties[0]?e[t].properties[0].displayValue.replace("Revit","").trim():"",n=S[n];void 0===e[t].properties[0]||h.includes(a)||h.push(a),s.push({id:t+1,component:r,category:a,rating:n,dbId:e[t].dbId})}p(s);var o=s.reduce(function(e,t){return e[t.category]=(e[t.category]||0)+1,e},{});f(Object.keys(o)),j(Object.values(o))})})},onModelError:function(e,t){y.log("Error loading the model.")}})),V.a.createElement(D.j,{xs:"5",xl:"5",className:"pb-2",style:{borderLeft:"3px solid"}},V.a.createElement(D.g,{className:"shadow-lg py-3 px-3 border-left",style:{background:"#eff2f5",overflow:"scroll"}},V.a.createElement(D.P,{variant:"tabs",role:"tablist"},V.a.createElement(D.Q,null,V.a.createElement(D.R,{href:"#","data-tab":"home",active:1===n,onClick:function(){return E(1)}},"Elements Distribution")),V.a.createElement(D.Q,null,V.a.createElement(D.R,{href:"#",active:2===n,onClick:function(){return E(2)}},"Fire Rating")),V.a.createElement(D.Q,null,V.a.createElement(D.R,{href:"#",active:3===n,onClick:function(){return E(3)}},"All Components"))),V.a.createElement(D.fb,null,1===n?V.a.createElement("div",null,V.a.createElement("div",{className:"pt-4 py-4",style:{minHeight:"350px"}},V.a.createElement(O.Doughnut,{data:e})),V.a.createElement("hr",null),V.a.createElement("div",{className:"py-4 h-1/2"},V.a.createElement(_.a,{title:"Elements Distribution",categories:h,data:o}))):V.a.createElement("div",null),2===n?V.a.createElement("div",null,h&&0<h.length,h.map(function(t,e){var n=g.filter(function(e){return e.category===t}),r=n.map(function(e){return e.rating}),a=r.filter(function(e){return"Class A1"===e}).length,o=r.filter(function(e){return"Class A2"===e}).length,i=r.filter(function(e){return"Class B"===e}).length,s=r.filter(function(e){return"Class C"===e}).length,l=r.filter(function(e){return"Class D"===e}).length,c=r.filter(function(e){return"Class E"===e}).length,r=r.filter(function(e){return"Class F"===e}).length;return V.a.createElement(V.a.Fragment,null,V.a.createElement(z.a,{trigger:t+" ("+n.length+")",key:e,triggerTagName:"button",triggerStyle:{padding:"5px",borderRadius:"5px",marginTop:"15px",fontWeight:"bold"}},V.a.createElement("div",{className:"px-5 mb-4"},V.a.createElement(_.a,{title:"Fire Rating Distribution",categories:["Class A1","Class A2","Class B","Class C","Class D","Class E","Class F"],data:[a,o,i,s,l,c,r]})),V.a.createElement(D.m,{items:n,fields:["id","category","component","fire rating"],itemsPerPage:10,pagination:!0,tableFilter:!0,sorter:!0,size:400,color:"#fff",style:{height:"100%",overflowY:"scroll"},hover:!0,scopedSlots:{component:function(e){return V.a.createElement("td",{style:{width:"40%"},onClick:function(){return C(e)}},V.a.createElement("div",null,e.component))},"fire rating":function(e){return V.a.createElement("td",{style:{width:"35%"}},e.rating)},id:function(e){return V.a.createElement("td",{style:{width:"5%"}},e.id)},category:function(e){return V.a.createElement("td",{style:{width:"20%"}},e.category)}}})),V.a.createElement("hr",null))})):V.a.createElement("div",null),3===n?V.a.createElement("div",null,0<g.length?V.a.createElement(D.m,{items:g,fields:["id","category","component","fire rating"],itemsPerPage:10,pagination:!0,tableFilter:!0,sorter:!0,color:"#fff",style:{height:"100%",overflowY:"scroll"},hover:!0,scopedSlots:{component:function(e){return V.a.createElement("td",{style:{width:"40%"},onClick:function(){return C(e)}},e.component)},"fire rating":function(e){return V.a.createElement("td",{style:{width:"35%"}},e.rating)},category:function(e){return V.a.createElement("td",{style:{width:"20%"}},e.category)}}}):V.a.createElement("div",null,"loading")):V.a.createElement("div",null))))))}}.call(this,n(43))}}]);