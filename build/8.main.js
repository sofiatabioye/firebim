(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1330:function(e,t,a){"use strict";a.r(t);var r=a(44),b=a.n(r),r=a(126),v=a.n(r),h=a(1),y=a.n(h),N=a(910),j=a(911),O=a(238),r=a(915),w=a.n(r),C=a(1092);function n(t,e){var a,r=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)),r}function k(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach(function(e){b()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var x={title:{presence:{allowEmpty:!1,message:"is required"},length:{maximum:32}},category:{presence:{allowEmpty:!1,message:"is required"},length:{maximum:32}},type:{presence:{allowEmpty:!1,message:"is required"},length:{maximum:32}}};t.default=function(){var t=Object(O.b)(),e=Object(O.c)(function(e){return e.assetField.assetFields}),a=Object(O.c)(function(e){return e.assetCategory.assetCategories}),r=Object(h.useState)(!1),n=v()(r,2),l=n[0],s=n[1],c=Object(h.useState)(!1),o=v()(c,2),r=o[0],m=o[1],n=Object(h.useState)(!1),c=v()(n,2),o=c[0],i=c[1],n=Object(h.useState)({}),c=v()(n,2),u=c[0],d=c[1],n=Object(h.useState)({isValid:!1,values:{},touched:{},errors:{}}),c=v()(n,2),p=c[0],g=c[1],n=Object(O.c)(function(e){return e.auth.user});Object(h.useEffect)(function(){var t=w()(p.values,x);g(function(e){return k(k({},e),{},{isValid:!t,errors:t||{}})})},[p.values]);function E(e){return!(!p.touched[e]||!p.errors[e])}function f(t){t.persist(),g(function(e){return k(k({},e),{},{values:k(k({},e.values),{},b()({},t.target.name,"checkbox"===t.target.type?t.target.checked:t.target.value)),touched:k(k({},e.touched),{},b()({},t.target.name,!0))})})}c=function(e,t){return y.a.createElement(N.t,{className:"form-horizontal",onSubmit:e},y.a.createElement(N.L,null,y.a.createElement(N.u,{row:!0},y.a.createElement(N.j,{md:"3"},y.a.createElement(N.I,{htmlFor:"hf-email"},"Name")),y.a.createElement(N.j,{xs:"12",md:"9"},y.a.createElement(N.C,{type:"text",id:"title",name:"title",placeholder:"Enter data point name...",onChange:f,value:p.values.title||"",required:!0}),y.a.createElement(N.v,{className:"help-block"},E("title")?p.errors.title[0]:"Please enter the name"))),y.a.createElement(N.u,{row:!0},y.a.createElement(N.j,{md:"3"},y.a.createElement(N.I,{htmlFor:"category"},"Category")),y.a.createElement(N.j,{xs:"12",md:"9"},y.a.createElement(N.U,{custom:!0,name:"category",id:"category",autoComplete:"category",onChange:f,value:p.values.category||"",required:!0},y.a.createElement("option",{value:""},"Please select"),a&&0<a.length?a.map(function(e){return y.a.createElement("option",{value:e.title,key:e.id},e.title)}):""),y.a.createElement(N.v,{className:"help-block"},E("category")?p.errors.category[0]:"Select category"))),y.a.createElement(N.u,{row:!0},y.a.createElement(N.j,{md:"3"},y.a.createElement(N.I,{htmlFor:"type"},"Data Type")),y.a.createElement(N.j,{xs:"12",md:"9"},y.a.createElement(N.U,{custom:!0,name:"type",id:"type",autoComplete:"type",onChange:f,value:p.values.type||"",required:!0},y.a.createElement("option",{value:""},"Please select"),y.a.createElement("option",{value:"string"},"String"),y.a.createElement("option",{value:"number"},"Number"),y.a.createElement("option",{value:"url"},"URL"),y.a.createElement("option",{value:"date"},"Date")),y.a.createElement(N.v,{className:"help-block"},E("type")?p.errors.type[0]:"Select data type")))),y.a.createElement(N.M,null,y.a.createElement(N.e,{className:"sidebar-dark text-white",type:"submit"},"Submit")," ",y.a.createElement(N.e,{color:"secondary",onClick:function(){("edit"==t?m:s)(!1)}},"Cancel")))};return y.a.createElement(y.a.Fragment,null,y.a.createElement(N.T,null,y.a.createElement(N.j,{xs:"12",lg:"12"},y.a.createElement(N.g,{className:"shadow-lg"},y.a.createElement(N.i,null,"Asset Data Fields",n&&"admin"===n.role?y.a.createElement(N.e,{variant:"outline",active:!0,"aria-pressed":"true",className:"float-right sidebar-dark text-white",onClick:function(){return s(!l)}},"Add New Datapoint"):null),y.a.createElement(N.K,{show:l,onClose:s},y.a.createElement(N.N,{closeButton:!0},y.a.createElement(N.O,null,"New Datapoint")),c(function(e){return e.preventDefault(),p.isValid&&t(Object(C.b)(p.values)),g({isValid:!1,values:{},touched:{},errors:{}}),s(!1),!1},"add")),y.a.createElement(N.h,null,e?y.a.createElement(N.m,{items:e,fields:n&&"admin"===n.role?["title","category","type","actions"]:["title","category","type"],itemsPerPage:10,pagination:!0,tableFilter:!0,sorter:!0,hover:!0,size:400,scopedSlots:{actions:function(t){return y.a.createElement("td",{className:"px-4"},y.a.createElement(N.e,{className:"pl-6",onClick:function(){return e=t,m(!0),g({isValid:!0,values:e,touched:{},errors:{}}),void d(e);var e},color:"primary",variant:"ghost"},y.a.createElement(j.a,{name:"cil-pencil",color:"primary",customClasses:"c-sidebar-nav-icon"})),y.a.createElement(N.e,{className:"pl-6",onClick:function(){return e=t,i(!0),void d(e);var e},color:"danger",variant:"ghost"},y.a.createElement(j.a,{name:"cil-trash",customClasses:"c-sidebar-nav-icon"})))}}}):y.a.createElement("div",null,"Loading..")),y.a.createElement(N.K,{show:o,onClose:i},y.a.createElement(N.N,{closeButton:!0}," Confirm"),y.a.createElement(N.L,null,"Are you sure you want to delete this asset category? "),y.a.createElement(N.M,null,y.a.createElement(N.e,{className:"text-white bg-danger",type:"submit",onClick:function(){t(Object(C.d)(u.id)),d({}),i(!1)}},"Yes")," ",y.a.createElement(N.e,{color:"secondary",onClick:function(){return i(!1)}},"Cancel"))),y.a.createElement(N.K,{show:r,onClose:m},y.a.createElement(N.N,{closeButton:!0}," Confirm"),c(function(e){e.preventDefault(),t(Object(C.h)(u.id,p.values)),d({}),g({isValid:!1,values:{},touched:{},errors:{}}),m(!1)},"edit"))))))}},1337:function(e,t,a){"use strict";a.r(t);var r=a(44),u=a.n(r),r=a(126),d=a.n(r),p=a(1),g=a.n(p),E=a(238),f=a(910),b=a(912),v=a(911),r=a(915),h=a.n(r),y=a(1200);function n(t,e){var a,r=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)),r}function N(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach(function(e){u()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var j={firstName:{length:{minimum:2,maximum:32}},lastName:{length:{minimum:2,maximum:32}},organisation:{length:{maximum:45,minimum:3,message:"must be at least 3 characters"}},address:{length:{maximum:45,minimum:3,message:"must be at least 3 characters"}}};t.default=function(e){var t=Object(E.b)(),a=Object(p.useState)("password"),r=d()(a,2),a=(r[0],r[1],Object(p.useState)(void 0)),r=d()(a,2),n=r[0],l=r[1],s=Object(E.c)(function(e){return e.auth.profile}),a=Object(p.useState)(!1),r=d()(a,2),c=r[0],o=r[1],a=Object(p.useState)({isValid:!1,values:{firstName:s?s.firstName:"",lastName:s?s.lastName:"",address:s?s.address:"",organisation:s?s.organisation:"",image:s?s.image:null},touched:{},errors:{}}),r=d()(a,2),m=r[0],i=r[1],a=function(e){return!(!m.touched[e]||!m.errors[e])},r=function(a){a.persist(),i(function(e){var t;return N(N({},e),{},{values:N(N({},e.values),{},(t={},u()(t,a.target.name,"checkbox"===a.target.type?a.target.checked:a.target.value),u()(t,a.target.name,"file"===a.target.type?l(a.target.files[0]):a.target.value),t)),touched:N(N({},e.touched),{},u()({},a.target.name,!0))})})};Object(p.useEffect)(function(){var t=h()(m.values,j);i(function(e){return N(N({},e),{},{isValid:!t,errors:t||{}})})},[m.values]);return g.a.createElement(f.T,null,g.a.createElement(f.j,{xs:"12",xl:"6",className:"align-content-center m-auto"},g.a.createElement(f.g,{className:"card-accent-dark shadow-lg",size:"lg"},g.a.createElement(f.i,{className:"text-center"},g.a.createElement("div",{className:"d-block my-3"},"User Profile")),g.a.createElement(f.h,{className:"text-center"},g.a.createElement(f.t,{onSubmit:function(e){e.preventDefault();e=new FormData;m.isValid&&0<Object.keys(m.values).length&&(void 0!==n&&n.size<=1e6&&!0===c&&e.append("image",n),e.append("firstName",m.values.firstName),e.append("lastName",m.values.lastName),e.append("address",m.values.address),e.append("organisation",m.values.organisation),t(Object(b.n)(e,s.id))),i({isValid:!1,values:{firstName:m.values.firstName,lastName:m.values.lastName,address:m.values.address,organisation:m.values.organisation,image:m.values.image},touched:{},errors:{}}),l(void 0),o(!1)}},g.a.createElement(f.B,{src:s&&null!==s.image?"data:image/png;base64, "+s.image:y.a,fluid:!0,height:150,width:150,align:"center",shape:"rounded-circle",className:"mb-2"}),g.a.createElement(f.T,{className:"center text-center"},g.a.createElement(f.j,{md:{span:6,offset:3}},c?g.a.createElement(f.D,{className:"mb-3 center",width:"50%"},g.a.createElement(f.G,{component:"image",htmlFor:"inputGroupFile01"},g.a.createElement("span",{onClick:function(){return o(!c)}},g.a.createElement(v.a,{name:"cil-x",color:"sidebar-dark"}))),g.a.createElement(f.C,{type:"file",id:"image",name:"image",accept:"image/png, image/jpeg, image/jpg",onChange:r}),g.a.createElement("div",{className:"text-danger"},g.a.createElement(f.v,{className:"d-block help-block mt-2 text-danger"},void 0!==n&&1e6<n.size?"File too large! Image cannot be larger than 1MB":null))):g.a.createElement("div",{onClick:function(){return o(!c)}}," ",g.a.createElement(v.a,{name:"cil-pencil",color:"sidebar-dark"})," Change Profile Picture"))),g.a.createElement("hr",null),g.a.createElement(f.T,{className:"g-3 mb-3 mt-4"},g.a.createElement(f.j,{xs:!0},g.a.createElement(f.I,{htmlFor:"firstName",className:"float-left"},"FirstName"),g.a.createElement(f.C,{placeholder:"Enter First name","aria-label":"First name",id:"firstName",name:"firstName",onChange:r,value:m.values.firstName||""}),g.a.createElement("div",null,g.a.createElement(f.v,{className:"d-block help-block"}," ",a("firstName")?m.errors.firstName[0]:null," "))),g.a.createElement(f.j,{xs:!0},g.a.createElement(f.I,{htmlFor:"lastName",className:"float-left"},"LastName"),g.a.createElement(f.C,{placeholder:"Enter Last name","aria-label":"Last name",name:"lastName",onChange:r,value:m.values.lastName||""}),g.a.createElement("div",null,g.a.createElement(f.v,{className:"d-block help-block"}," ",a("lastName")?m.errors.lastName[0]:null," "))),g.a.createElement(f.j,{xs:12},g.a.createElement(f.I,{htmlFor:"organisation",className:"float-left mt-3"},"Organisation"),g.a.createElement(f.C,{id:"organisation",placeholder:"Organisation name",name:"organisation",onChange:r,value:m.values.organisation||""}),g.a.createElement("div",null,g.a.createElement(f.v,{className:"d-block help-block"}," ",a("organisation")?m.errors.organisation[0]:null," "))),g.a.createElement(f.j,{xs:12},g.a.createElement(f.I,{htmlFor:"address",className:"float-left mt-3"},"Location"),g.a.createElement(f.C,{id:"address",placeholder:"Enter your address",name:"address",onChange:r,value:m.values.address||""}),g.a.createElement("div",null,g.a.createElement(f.v,{className:"d-block help-block"}," ",a("address")?m.errors.address[0]:null," "))),g.a.createElement(f.j,{xs:12},g.a.createElement(f.I,{htmlFor:"email",className:"float-left mt-3"},"Email"),g.a.createElement(f.C,{id:"email",placeholder:"Enter email address",name:"email",value:s?s.email:"",disabled:!0})),g.a.createElement(f.j,{xs:12},g.a.createElement(f.I,{htmlFor:"role",className:"float-left mt-3"},"Role"),g.a.createElement(f.C,{id:"role",placeholder:"Enter user role",name:"role",value:s?s.role:"",disabled:!0}))),g.a.createElement(f.T,null,g.a.createElement(f.j,{xs:"12"},g.a.createElement(f.e,{type:"submit",className:"px-4 sidebar-dark text-white",disabled:!m.isValid},"Submit"))))))))}}}]);