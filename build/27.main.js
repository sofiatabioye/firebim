(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1333:function(e,t,a){"use strict";a.r(t);var n=a(917),O=a.n(n),n=a(126),w=a.n(n),n=a(918),k=a.n(n),N=a(1),x=a.n(N),S=a(910),n=a(930),C=a.n(n),F=a(911),A=a(238),P=a(929);t.default=function(t){var l=Object(A.b)(),a=Object(A.c)(function(e){return e.assetField.assetFields}),e=(Object(A.c)(function(e){return e.assetCategory.assetCategories}),Object(N.useState)({})),n=w()(e,2),r=n[0],c=n[1],s=Object(A.c)(function(e){return e.project.projects}),i=Object(N.useState)(null),u=w()(i,2),o=u[0],m=u[1],d=Object(N.useState)(!1),e=w()(d,2),f=e[0],p=e[1],n=Object(N.useState)(!1),i=w()(n,2),u=i[0],b=i[1],d=Object(N.useState)({}),e=w()(d,2),E=e[0],h=e[1],n=Object(N.useState)(!1),i=w()(n,2),d=i[0],g=i[1],e=Object(N.useState)([]),n=w()(e,2),i=n[0],v=n[1],e=Object(N.useState)(10),n=w()(e,2),e=n[0],j=n[1],n=Object(A.c)(function(e){return e.auth.user});Object(N.useEffect)(function(){var e=s&&0<s.length?s.find(function(e){return e.id===Number(t.match.params.projectId)}):null;c(e),g(!0)},[s,t.match.params.projectId]),Object(N.useEffect)(function(){var e;0<Object.keys(r).length&&r.assetFields&&0<r.assetFields.length&&(e=a.filter(function(e){return!r.assetFields.map(function(e){return e.id}).includes(e.id)}).map(function(e){return{value:e.title,key:e.id,cat:e.category}}),v(e))},[d,r,a]);var y=function(){var a=O()(k.a.mark(function e(t,a){var n;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a&&"remove"===a&&0<Object.keys(E).length&&r.assetFields)return n=r.assetFields.filter(function(e){return e.id!==E.id}).map(function(e){return e.id}),e.next=5,l(Object(P.g)(r.id,{title:r.title,assetFields:n}));e.next=8;break;case 5:b(!1),h({}),m(null);case 8:if(o)return n=o.selected.map(function(e){return e.key}),n=r.assetFields&&0<r.assetFields.length?r.assetFields.map(function(e){return e.id}).concat(n):n,e.next=13,l(Object(P.g)(r.id,{title:r.title,assetFields:n}));e.next=14;break;case 13:m(null);case 14:return e.next=16,p(!1);case 16:return e.next=18,l(Object(P.e)());case 18:return e.next=20,m(null);case 20:case"end":return e.stop()}},e)}));return function(e,t){return a.apply(this,arguments)}}();return x.a.createElement(x.a.Fragment,null,x.a.createElement(S.T,null,x.a.createElement(S.j,{xs:"12",lg:"12"},x.a.createElement(S.g,{className:"shadow-lg"},x.a.createElement(S.i,null,x.a.createElement("h4",{className:"pt-3 float-left"}," ",r?r.title:null," Datapoints"),n&&"admin"===n.role&&r?x.a.createElement("span",{className:"flex justify-end mr-20 multiSelectWrapper"},x.a.createElement(C.a,{options:i&&0<i.length?i:a.map(function(e){return{value:e.title,key:e.id,cat:e.category}}),placeholder:"Select Asset fields",onSelect:function(e){m({selected:e})},showCheckbox:!0,selectedValues:o,closeOnSelect:!1,displayValue:"value"}),x.a.createElement(S.e,{variant:"outline",active:!0,"aria-pressed":"true",className:"float-right sidebar-dark text-white",onClick:function(){return p(!f)},disabled:!o},x.a.createElement("i",{className:"fa fa-add"})," Add"),x.a.createElement("span",{className:"pl-4 pt-2"},x.a.createElement("i",{className:"fa fa-sliders-h"}),x.a.createElement("select",{"aria-label":"Select items per page",onChange:function(e){j(Number(e.target.value))},name:"itemsPerPage",value:e},x.a.createElement("option",{value:"10"},"10"),x.a.createElement("option",{value:"25"},"25"),x.a.createElement("option",{value:"50"},"50")))):null),x.a.createElement(S.K,{show:f,onClose:p},x.a.createElement(S.N,{closeButton:!0},x.a.createElement(S.O,null,"Add New Datapoint")),x.a.createElement(S.t,{className:"form-horizontal",onSubmit:y},x.a.createElement(S.L,null,"Are you sure you want to add these data points?"),x.a.createElement(S.M,null,x.a.createElement(S.e,{className:"sidebar-dark text-white",type:"submit"},"Submit")," ",x.a.createElement(S.e,{color:"secondary",onClick:function(){return p(!1)}},"Cancel")))),x.a.createElement(S.h,null,r?x.a.createElement(S.m,{items:r.assetFields,fields:n&&"admin"===n.role?["title","category","type","actions"]:["title","category","type"],itemsPerPage:e,pagination:!0,tableFilter:!0,sorter:!0,hover:!0,scopedSlots:{actions:function(t){return x.a.createElement("td",{className:"px-4",style:{width:"5%"}},x.a.createElement(S.e,{className:"pl-6",color:"danger",variant:"ghost",onClick:function(){return e=t,b(!0),void h(e);var e}},x.a.createElement(F.a,{name:"cil-x",customClasses:"c-sidebar-nav-icon"})))}}}):x.a.createElement("div",null,"Loading..")),x.a.createElement(S.K,{show:u,onClose:b},x.a.createElement(S.N,{closeButton:!0}," Confirm"),x.a.createElement(S.L,null,x.a.createElement("h6",null,"Are you sure you want to remove this data point [",E.title,"]? ")),x.a.createElement(S.M,null,x.a.createElement(S.e,{className:"text-white bg-danger",type:"submit",onClick:function(e){return y(e,"remove")}},"Yes")," ",x.a.createElement(S.e,{color:"secondary",onClick:function(){b(!1),h({})}},"Cancel")))))))}}}]);