(this.webpackJsonptiesadvancedlogistics=this.webpackJsonptiesadvancedlogistics||[]).push([[34],{1093:function(e,t,s){"use strict";s.r(t);var c=s(919),n=s.n(c),a=s(920),i=s(118),r=s(2),l=s(911),o=s(926),u=s.n(o),j=s(912),d=s(213),b=s(924),O=s(3);t.default=function(e){var t=Object(d.b)(),s=Object(d.c)((function(e){return e.assetField.assetFields})),c=(Object(d.c)((function(e){return e.assetCategory.assetCategories})),Object(r.useState)({})),o=Object(i.a)(c,2),h=o[0],f=o[1],x=Object(d.c)((function(e){return e.project.projects})),p=Object(r.useState)(null),m=Object(i.a)(p,2),g=m[0],v=m[1],y=Object(r.useState)(!1),k=Object(i.a)(y,2),N=k[0],S=k[1],w=Object(r.useState)(!1),C=Object(i.a)(w,2),F=C[0],A=C[1],P=Object(r.useState)({}),D=Object(i.a)(P,2),L=D[0],B=D[1],E=Object(r.useState)(!1),I=Object(i.a)(E,2),J=I[0],K=I[1],M=Object(r.useState)([]),V=Object(i.a)(M,2),z=V[0],T=V[1],W=Object(r.useState)(10),Y=Object(i.a)(W,2),q=Y[0],G=Y[1],H=Object(d.c)((function(e){return e.auth.user}));Object(r.useEffect)((function(){var t=x&&x.length>0?x.find((function(t){return t.id===Number(e.match.params.projectId)})):null;f(t),K(!0)}),[x,e.match.params.projectId]),Object(r.useEffect)((function(){if(Object.keys(h).length>0&&h.assetFields&&h.assetFields.length>0){var e=s.filter((function(e){return!h.assetFields.map((function(e){return e.id})).includes(e.id)})).map((function(e){return{value:e.title,key:e.id,cat:e.category}}));T(e)}}),[J,h,s]);var Q=function(){var e=Object(a.a)(n.a.mark((function e(s,c){var a,i,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),!(c&&"remove"===c&&Object.keys(L).length>0&&h.assetFields)){e.next=8;break}return a=h.assetFields.filter((function(e){return e.id!==L.id})).map((function(e){return e.id})),e.next=5,t(Object(b.g)(h.id,{title:h.title,assetFields:a}));case 5:A(!1),B({}),v(null);case 8:if(!g){e.next=14;break}return i=g.selected.map((function(e){return e.key})),r=h.assetFields&&h.assetFields.length>0?h.assetFields.map((function(e){return e.id})).concat(i):i,e.next=13,t(Object(b.g)(h.id,{title:h.title,assetFields:r}));case 13:v(null);case 14:return e.next=16,S(!1);case 16:return e.next=18,t(Object(b.e)());case 18:return e.next=20,v(null);case 20:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}();return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(l.T,{children:Object(O.jsx)(l.j,{xs:"12",lg:"12",children:Object(O.jsxs)(l.g,{className:"shadow-lg",children:[Object(O.jsxs)(l.i,{children:[Object(O.jsxs)("h4",{className:"pt-3 float-left",children:[" ",h?h.title:null," Datapoints"]}),H&&"admin"===H.role&&h?Object(O.jsxs)("span",{className:"flex justify-end mr-20 multiSelectWrapper",children:[Object(O.jsx)(u.a,{options:z&&z.length>0?z:s.map((function(e){return{value:e.title,key:e.id,cat:e.category}})),placeholder:"Select Asset fields",onSelect:function(e){v({selected:e})},showCheckbox:!0,selectedValues:g,closeOnSelect:!1,displayValue:"value"}),Object(O.jsxs)(l.e,{variant:"outline",active:!0,"aria-pressed":"true",className:"float-right sidebar-dark text-white",onClick:function(){return S(!N)},disabled:!g,children:[Object(O.jsx)("i",{className:"fa fa-add"})," Add"]}),Object(O.jsxs)("span",{className:"pl-4 pt-2",children:[Object(O.jsx)("i",{className:"fa fa-sliders-h"}),Object(O.jsxs)("select",{"aria-label":"Select items per page",onChange:function(e){G(Number(e.target.value))},name:"itemsPerPage",value:q,children:[Object(O.jsx)("option",{value:"10",children:"10"}),Object(O.jsx)("option",{value:"25",children:"25"}),Object(O.jsx)("option",{value:"50",children:"50"})]})]})]}):null]}),Object(O.jsxs)(l.K,{show:N,onClose:S,children:[Object(O.jsx)(l.N,{closeButton:!0,children:Object(O.jsx)(l.O,{children:"Add New Datapoint"})}),Object(O.jsxs)(l.t,{className:"form-horizontal",onSubmit:Q,children:[Object(O.jsx)(l.L,{children:"Are you sure you want to add these data points?"}),Object(O.jsxs)(l.M,{children:[Object(O.jsx)(l.e,{className:"sidebar-dark text-white",type:"submit",children:"Submit"})," ",Object(O.jsx)(l.e,{color:"secondary",onClick:function(){return S(!1)},children:"Cancel"})]})]})]}),Object(O.jsx)(l.h,{children:h?Object(O.jsx)(l.m,{items:h.assetFields,fields:H&&"admin"===H.role?["title","category","type","actions"]:["title","category","type"],itemsPerPage:q,pagination:!0,tableFilter:!0,sorter:!0,hover:!0,scopedSlots:{actions:function(e){return Object(O.jsx)("td",{className:"px-4",style:{width:"5%"},children:Object(O.jsx)(l.e,{className:"pl-6",color:"danger",variant:"ghost",onClick:function(){return function(e){A(!0),B(e)}(e)},children:Object(O.jsx)(j.a,{name:"cil-x",customClasses:"c-sidebar-nav-icon"})})})}}}):Object(O.jsx)("div",{children:"Loading.."})}),Object(O.jsxs)(l.K,{show:F,onClose:A,children:[Object(O.jsx)(l.N,{closeButton:!0,children:" Confirm"}),Object(O.jsx)(l.L,{children:Object(O.jsxs)("h6",{children:["Are you sure you want to remove this data point [",L.title,"]? "]})}),Object(O.jsxs)(l.M,{children:[Object(O.jsx)(l.e,{className:"text-white bg-danger",type:"submit",onClick:function(e){return Q(e,"remove")},children:"Yes"})," ",Object(O.jsx)(l.e,{color:"secondary",onClick:function(){return A(!1),void B({})},children:"Cancel"})]})]})]})})})})}}}]);
//# sourceMappingURL=34.b1e9c762.chunk.js.map