(this.webpackJsonptiesadvancedlogistics=this.webpackJsonptiesadvancedlogistics||[]).push([[22],{1092:function(e,t,s){"use strict";s.r(t);var c=s(119),n=s(919),r=s.n(n),a=s(920),i=s(1),l=s(118),o=s(2),d=s(213),j=s(917),u=s.n(j),b=s(911),h=s(912),O=s(977),x=s(978),m=(s(926),s(924)),p=(s(952),s(3)),f={title:{presence:{allowEmpty:!1,message:"is required"},length:{maximum:32}},description:{presence:{allowEmpty:!1,message:"is required"},length:{maximum:32}}},_=["TIES_0101_DesPh_Category","TIES_0105_DesPh_UniqueAssetID","TIES_0111_DesPh_DesignedBy","TIES_0111_DesPh_ContactNumber","TIES_0115_DesPh_Status","TIES_0116_DesPh_MaterialAndEC","IES_0201_ManPh_Manufacturer","TIES_0207_ManPh_ManufacturedBy","TIES_0208_ManPh_ManufacturedByContactNumber","TIES_0215_ManPh_WarehouseAddress","TIES_0217_ManPh_StoredBy","TIES_0218_ManPh_StoredByContactNumber","TIES_0301_DelPh_DeliveryCompanyName","TIES_0306_DelPh_CollectedBy","TIES_0307_DelPh_CollectedByContactNumber","TIES_0309_DelPh_VehicleRegistrationNumber","TIES_0401_InsPh_ConstructionSiteName","TIES_0402_InsPh_ConstructionSiteAddress","TIES_0405_InsPh_CollectedBy","TIES_0406_InsPh_CollectedByContactNumber","TIES_0414_InsPh_CraneType","TIES_0426_InsPh_InstallationDateInstalledBy","TIES_0427_InsPh_InstallationDateInstalledByContactNumber"];t.default=function(){var e=Object(o.useState)(!1),t=Object(l.a)(e,2),s=t[0],n=t[1],j=Object(o.useState)(!1),v=Object(l.a)(j,2),S=v[0],g=v[1],y=Object(o.useState)({}),C=Object(l.a)(y,2),I=C[0],P=C[1],N=Object(o.useState)(!1),E=Object(l.a)(N,2),T=E[0],k=E[1],w=Object(o.useState)(!1),D=Object(l.a)(w,2),B=D[0],M=D[1],F=Object(o.useState)(null),V=Object(l.a)(F,2),A=V[0],q=V[1],L=Object(d.c)((function(e){return e.assetField.assetFields})),J=Object(o.useState)(!1),K=Object(l.a)(J,2),z=K[0],U=K[1],W=Object(o.useState)([]),H=Object(l.a)(W,2),R=H[0],Y=H[1],G=Object(d.b)(),Q=Object(o.useState)(void 0),X=Object(l.a)(Q,2),Z=X[0],$=X[1],ee=Object(o.useState)({isValid:!1,values:{},touched:{},errors:{}}),te=Object(l.a)(ee,2),se=te[0],ce=te[1],ne=Object(d.c)((function(e){return e.auth.user}));Object(o.useEffect)((function(){var e=u()(se.values,f);ce((function(t){return Object(i.a)(Object(i.a)({},t),{},{isValid:!e,errors:e||{}})})),z&&(G(Object(m.e)()),U(!1))}),[se.values,z]),Object(o.useEffect)((function(){R.length<=0&&Y(L.map((function(e){return{label:e.title,value:e.id}})))}),[L,R]),Object(o.useEffect)((function(){var e=L.filter((function(e){return _.includes(e.title)}));q(e)}),[L]);var re=function(){var e=Object(a.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log(se,A),s=A?Object(i.a)(Object(i.a)({},se.values),{assetFields:A.map((function(e){return e.id}))}):se.values,!se.isValid||!A){e.next=6;break}return e.next=6,G(Object(m.a)(s));case 6:return ce({isValid:!1,values:{},touched:{},errors:{}}),e.next=9,n(!1);case 9:U(!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=new WeakSet;return function(t,s){if("object"===typeof s&&null!==s){if(e.has(s))return;e.add(s)}return s}},ie=function(){var e=Object(a.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!se.isValid){e.next=5;break}return s=JSON.stringify({title:se.values.title,address:se.values.address,description:se.values.description},ae()),e.next=5,G(Object(m.g)(I.id,s));case 5:return ce({isValid:!1,values:{},touched:{},errors:{}}),e.next=8,q(null);case 8:return e.next=10,g(!1);case 10:U(!0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(e){return!(!se.touched[e]||!se.errors[e])},oe=function(e){e.persist(),ce((function(t){var s;return Object(i.a)(Object(i.a)({},t),{},{values:Object(i.a)(Object(i.a)({},t.values),{},(s={},Object(c.a)(s,e.target.name,"checkbox"===e.target.type?e.target.checked:e.target.value),Object(c.a)(s,e.target.name,"file"===e.target.type?$(e.target.files[0]):e.target.value),s)),touched:Object(i.a)(Object(i.a)({},t.touched),{},Object(c.a)({},e.target.name,!0))})}))},de=function(e){k(!T),P(e)},je=function(){g(!1),P({}),ce({isValid:!1,values:{},touched:{},errors:{}})},ue=function(){var e=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I.id){e.next=7;break}return e.next=3,G(Object(m.b)(I.id));case 3:return e.next=5,P({});case 5:return e.next=7,G(Object(m.e)());case 7:M(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(e,t){return Object(p.jsxs)(b.t,{className:"form-horizontal",onSubmit:e,children:[Object(p.jsxs)(b.u,{row:!0,children:[Object(p.jsx)(b.j,{md:"3",children:Object(p.jsx)(b.I,{htmlFor:"hf-email",children:"Title"})}),Object(p.jsxs)(b.j,{xs:"12",md:"9",children:[Object(p.jsx)(b.C,{type:"text",id:"title",name:"title",placeholder:"Enter Project Title",onChange:oe,value:se.values.title||"",required:!0}),Object(p.jsx)(b.jb,{children:"Looks good! "}),Object(p.jsx)(b.H,{children:" Please enter valid title "}),Object(p.jsxs)(b.v,{className:"help-block",children:[" ",le("title")?se.errors.title[0]:"Please enter title"," "]})]}),Object(p.jsx)(b.j,{md:"3",children:Object(p.jsx)(b.I,{htmlFor:"description",children:"Description"})}),Object(p.jsxs)(b.j,{xs:"12",md:"9",children:[Object(p.jsx)(b.C,{type:"text",id:"description",name:"description",placeholder:"Project Description",onChange:oe,value:se.values.description||"",required:!0}),Object(p.jsx)(b.v,{className:"help-block",children:le("description")?se.errors.description[0]:"Please enter description"})]}),Object(p.jsx)(b.j,{md:"3",children:Object(p.jsx)(b.I,{htmlFor:"address",children:"Address"})}),Object(p.jsxs)(b.j,{xs:"12",md:"9",children:[Object(p.jsx)(b.C,{type:"text",id:"address",name:"address",placeholder:"Project Address",onChange:oe,value:se.values.address||"",required:!0}),Object(p.jsx)(b.v,{className:"help-block",children:le("address")?se.errors.address[0]:"Please enter address"})]})]}),Object(p.jsxs)(b.M,{children:[Object(p.jsx)(b.e,{className:"text-white sidebar-dark",type:"submit",children:"Submit"})," ",Object(p.jsx)(b.e,{color:"secondary",onClick:function(){return"edit"===t?je():n(!1)},children:"Cancel"})]})]})},he=Object(d.c)((function(e){return e.project.projects}));return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(b.T,{children:[Object(p.jsxs)(b.j,{xs:"12",xl:"12",className:"my-4 border-bottom mb-5",children:[ne&&"admin"===ne.role?Object(p.jsx)(b.e,{className:"float-right sidebar-dark",color:"primary",size:"lg",onClick:function(){return n(!0)},children:"Add New Project"}):null,Object(p.jsx)("h1",{children:"Projects"}),Object(p.jsxs)(b.K,{show:s,onClose:n,children:[Object(p.jsx)(b.N,{closeButton:!0,children:Object(p.jsx)(b.O,{children:"New Project"})}),Object(p.jsx)(b.L,{children:be(re,"add")})]})]}),Object(p.jsxs)(b.j,{xs:"12",lg:"12",children:[Object(p.jsxs)(b.K,{show:S,onClose:je,children:[Object(p.jsx)(b.N,{closeButton:!0,children:Object(p.jsx)(b.O,{className:"text-lg-center",children:I.title})}),Object(p.jsx)(b.L,{children:be(ie,"edit")})]}),Object(p.jsxs)(b.K,{show:B,onClose:M,children:[Object(p.jsx)(b.N,{closeButton:!0,children:" Confirm"}),Object(p.jsx)(b.L,{children:"Are you sure you want to delete this project? "}),Object(p.jsxs)(b.M,{children:[Object(p.jsx)(b.e,{className:"text-white bg-danger",type:"submit",onClick:ue,children:"Yes"})," ",Object(p.jsx)(b.e,{color:"secondary",onClick:function(){return M(!1)},children:"Cancel"})]})]}),Object(p.jsxs)(b.K,{show:T,onClose:de,children:[Object(p.jsx)(b.N,{closeButton:!0,children:" Upload Model"}),Object(p.jsxs)(b.t,{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("sourceData",Z),t.append("title",I.title),t.append("projectId",I.id),G(Object(m.h)(t)),ce({isValid:!1,values:{},touched:{},errors:{}}),U(!0)},children:[Object(p.jsx)(b.L,{children:Object(p.jsx)(b.u,{children:Object(p.jsx)("input",{type:"file",name:"model",id:"model",accept:".ifc",onChange:oe,required:!0})})}),Object(p.jsxs)(b.M,{children:[Object(p.jsx)(b.e,{className:"text-white bg-info",type:"submit",children:"Submit"})," ",Object(p.jsx)(b.e,{color:"secondary",onClick:function(){return k(!1)},children:"Cancel"})]})]})]}),Object(p.jsx)(b.T,{children:Object(p.jsx)(b.g,{className:"card-accent-dark shadow-lg",size:"lg",children:Object(p.jsx)(b.h,{children:he&&he.length>0?Object(p.jsx)(b.m,{items:JSON.parse(JSON.stringify(he,ae())),fields:["title","description","address","datapoints","actions"],itemsPerPage:20,pagination:!0,tableFilter:!0,sorter:!0,hover:!0,sm:!0,addTableClasses:"assetsTable",scopedSlots:{actions:function(e,t){return Object(p.jsxs)("td",{className:"py-2",children:[ne&&"admin"===ne.role?Object(p.jsxs)("span",{children:[Object(p.jsx)(b.e,{color:"primary",className:"",variant:"ghost",onClick:function(){return t=e,g(!0),P(t),void ce({isValid:!0,values:t,touched:{},errors:{}});var t},children:Object(p.jsx)(h.a,{name:"cil-pencil"})}),Object(p.jsx)(b.e,{color:"danger",variant:"ghost",onClick:function(){return t=e,n(!1),M(!0),void P(t);var t},children:Object(p.jsx)(h.a,{name:"cil-trash"})})]}):null,ne&&"admin"===ne.role&&null===e.model?Object(p.jsxs)(b.e,{className:"",color:"info",variant:"ghost",onClick:function(){return de(e)},children:[Object(p.jsx)(O.a,{icon:x.a})," Upload Model"]}):null,ne&&"admin"!==ne.role&&null===e.model?Object(p.jsx)(b.a,{color:"danger",children:"No model!"}):null]})},datapoints:function(e,t){return Object(p.jsx)("td",{children:e.assetFields?e.assetFields.length:0})},status:function(e,t){return Object(p.jsxs)("td",{children:[Object(p.jsx)("span",{className:e.TIES_0116_DesPh_Status.replace(/\s/g,"").toLowerCase()}),e.TIES_0116_DesPh_Status]})}}}):Object(p.jsx)(b.db,{})})})})]})]})})}},952:function(e,t,s){"use strict";t.a=s.p+"static/media/thumbnail.c6ad974b.png"}}]);
//# sourceMappingURL=22.d960f337.chunk.js.map