(this.webpackJsonptiesadvancedlogistics=this.webpackJsonptiesadvancedlogistics||[]).push([[23],{1091:function(e,t,a){"use strict";a.r(t);var n=a(919),s=a.n(n),r=a(920),u=a(118),c=a(2),i=a(213),o=a(24),l=a(911),b=(a(1006),a(977),a(913)),d=a(3);function f(e,t){if(e&&"N/A"!==e&&!isNaN(Date.parse(e))){var a=new Date,n=(new Date(e).getTime()-a.getTime())/864e5;return n>0?["pastDueDate",t]:n<0&&n>=-7?["dueSoon",t]:["inTime",t]}}var _=function(e){var t=0,a=0,n=0,s=0,r=0,u=0,c={"Pre-manufactured":{dueSoon:0,pastDueDate:0,inTime:0},Manufactured:{dueSoon:0,pastDueDate:0,inTime:0},"In storage":{dueSoon:0,pastDueDate:0,inTime:0},"In transit":{dueSoon:0,pastDueDate:0,inTime:0},"Offloaded onsite":{dueSoon:0,pastDueDate:0,inTime:0},"Installed onsite":{dueSoon:0,pastDueDate:0,inTime:0}};return Array.isArray(e)&&e.length>0&&e.map((function(e){switch(e.TIES_0116_DesPh_Status){case"Pre-manufactured":var i=f(e.TIES_0113_DesPh_PlannedManufacturingDate,e.TIES_0116_DesPh_Status);i&&c[i[1]][i[0]]++,t++;break;case"Manufactured":var o=f(e.TIES_0206_ManPh_ManufacturingDate,e.TIES_0116_DesPh_Status);o&&c[o[1]][o[0]]++,a++;break;case"In storage":var l=f(e.TIES_0228_ManPh_StorageDate,e.TIES_0116_DesPh_Status);l&&c[l[1]][l[0]]++,n++;break;case"In transit":var b=f(e.TIES_0304_DelPh_CollectionDate,e.TIES_0116_DesPh_Status);b&&c[b[1]][b[0]]++,s++;break;case"Offloaded onsite":var d=f(e.TIES_0403_InsPh_OnsiteDeliveryDate,e.TIES_0116_DesPh_Status);d&&c[d[1]][d[0]]++,u++;break;case"Installed onsite":var _=f(e.TIES_0425_InsPh_InstallationDate,e.TIES_0116_DesPh_Status);_&&c[_[1]][_[0]]++,r++;break;default:0}})),[[t,a,n,s,u,r],c]};t.default=function(e){var t=Object(i.b)(),a=Object(c.useState)(null),n=Object(u.a)(a,2),f=n[0],S=(n[1],Object(c.useState)({})),D=Object(u.a)(S,2),j=D[0],O=D[1],h=Object(c.useState)([]),p=Object(u.a)(h,2),T=(p[0],p[1]),I=Object(c.useState)(!1),g=Object(u.a)(I,2),m=(g[0],g[1],Object(c.useState)([])),v=Object(u.a)(m,2),P=v[0],E=v[1],k=(Object(o.g)(),Object(i.c)((function(e){return e.assetCategory.assetCategories})),Object(i.c)((function(e){return e.project.projects}))),x=(Object(i.c)((function(e){return e.assetField.assetFields})),Object(i.c)((function(e){return e.auth.user})),Object(i.c)((function(e){return e.user.users})),Object(c.useState)(!1)),w=Object(u.a)(x,2),M=(w[0],w[1],Object(c.useState)(null)),y=Object(u.a)(M,2);y[0],y[1],j&&j.title,P&&P.length>0&&_(P)[0],P&&P.length>0&&Object.values(_(P)[1]).map((function(e){return e.inTime})),P&&P.length>0&&Object.values(_(P)[1]).map((function(e){return e.dueSoon})),P&&P.length>0&&Object.values(_(P)[1]).map((function(e){return e.pastDueDate}));Object(c.useEffect)(Object(r.a)(s.a.mark((function e(){var a,n,r,u,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=k&&k.length>0?k.filter((function(e){return null!==e.model})):[],T(a),!(k&&k.length>0&&null===f)){e.next=11;break}return n=k.find((function(e){return null!==e.model})),e.next=6,t(Object(b.d)(n.model.id));case 6:r=e.sent.data,O(n),r&&r.length>0?E(r):E([]),e.next=21;break;case 11:if(!(k&&k.length>0&&null!==f)){e.next=20;break}return u=a.find((function(e){return e.model.id===parseInt(f)})),O(u),e.next=16,t(Object(b.d)(f));case 16:c=e.sent.data,E(c),e.next=21;break;case 20:return e.abrupt("return");case 21:case"end":return e.stop()}}),e)}))),[t,k,f]);return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(l.T,{})})}}}]);
//# sourceMappingURL=23.0d2f59f0.chunk.js.map